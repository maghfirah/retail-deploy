"use strict";(self.webpackChunkrvn_retail_ui=self.webpackChunkrvn_retail_ui||[]).push([[54],{54:function(t,i,o){o.r(i),o.d(i,{ConfigurationModule:function(){return V}});var e=o(8583),n=o(4762),r=o(665),a=o(3709),s=o(229),l=o(2340),u=o(8412),c=o(7527),g=o(1347),d=o(9353),p=o(8259),h=o.n(p),m=o(6473),f=o(6694),v=o(8228),Z=o(5320),T=o(7716),S=o(1689),A=o(3206),b=o(9917),q=o(6506),k=o(7199),L=o(5770),C=o(7957),_=o(6385);function x(t,i){1&t&&(T.TgZ(0,"div"),T.TgZ(1,"div",2),T._UZ(2,"div",3),T.qZA(),T.qZA())}function y(t,i){1&t&&(T.TgZ(0,"div"),T._UZ(1,"i",48),T.qZA())}function N(t,i){if(1&t&&(T.TgZ(0,"div"),T._UZ(1,"img",49),T.qZA()),2&t){const t=T.oxw(3);T.xp6(1),T.Q6J("src",t.previewStoreImage,T.LSH)}}function I(t,i){1&t&&(T.TgZ(0,"div",50),T._uU(1,"*This field is cannot be left empty"),T.qZA())}function F(t,i){1&t&&(T.TgZ(0,"div",51),T.TgZ(1,"b"),T._uU(2,"Link Toko"),T.qZA(),T._UZ(3,"br"),T._uU(4,"Atur Link Tokomu. Maksimal 25 Karakter"),T.qZA())}function U(t,i){1&t&&(T.TgZ(0,"div",52),T._uU(1,"*This field is cannot be left empty"),T.qZA())}function M(t,i){1&t&&(T.TgZ(0,"div",52),T._uU(1,"*This field is not valid input text"),T.qZA())}function w(t,i){1&t&&(T.TgZ(0,"div",52),T._uU(1,"*This field max length is 25"),T.qZA())}function P(t,i){1&t&&(T.TgZ(0,"div",52),T._uU(1,"*This field is cannot be left empty"),T.qZA())}function O(t,i){1&t&&(T.TgZ(0,"div",52),T._uU(1,"*This field is not valid input text"),T.qZA())}function J(t,i){1&t&&(T.TgZ(0,"div",52),T._uU(1,"*This field is cannot be left empty"),T.qZA())}function E(t,i){1&t&&(T.TgZ(0,"div",52),T._uU(1,"*This field is not valid input text"),T.qZA())}function Y(t,i){1&t&&(T.TgZ(0,"p",50),T._uU(1,"*This field is cannot be left empty"),T.qZA())}function B(t,i){1&t&&(T.TgZ(0,"p",50),T._uU(1,"*This field is cannot be left empty"),T.qZA())}function Q(t,i){1&t&&(T.TgZ(0,"p",50),T._uU(1,"*This field is not valid input text"),T.qZA())}const G=function(){return{standalone:!0}};function R(t,i){if(1&t){const t=T.EpF();T.TgZ(0,"div",12),T.TgZ(1,"div",4),T.TgZ(2,"div",13),T.TgZ(3,"form",14),T.NdJ("ngSubmit",function(){return T.CHM(t),T.oxw(2).submitConfigurationStoreLocation()}),T.TgZ(4,"div",15),T.TgZ(5,"div",16),T.TgZ(6,"h5"),T._uU(7,"Gambar Toko"),T.qZA(),T.qZA(),T.TgZ(8,"div",4),T.TgZ(9,"div",17),T.TgZ(10,"div",18),T.TgZ(11,"div",15),T.TgZ(12,"div",19),T.TgZ(13,"label",20),T.YNc(14,y,2,0,"div",21),T.YNc(15,N,2,1,"div",21),T.qZA(),T.qZA(),T.qZA(),T.TgZ(16,"div",22),T.TgZ(17,"label",23),T.TgZ(18,"input",24),T.NdJ("change",function(i){return T.CHM(t),T.oxw(2).fileProgress(i)}),T.qZA(),T._uU(19," Pilih Foto "),T.qZA(),T._UZ(20,"br"),T.TgZ(21,"span"),T._uU(22,"Maximum size 1 MB. File must be .jpg or .png"),T.qZA(),T.YNc(23,I,2,0,"div",25),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.TgZ(24,"div",15),T.TgZ(25,"div",16),T.TgZ(26,"h5"),T._uU(27,"Nama "),T._UZ(28,"i",26),T.qZA(),T.qZA(),T.TgZ(29,"div",16),T._UZ(30,"input",27),T.qZA(),T.qZA(),T.TgZ(31,"div",15),T.YNc(32,F,5,0,"ng-template",null,28,T.W1O),T.TgZ(34,"div",16),T.TgZ(35,"h5"),T._uU(36,"Link Toko Online "),T._UZ(37,"i",29),T.qZA(),T.qZA(),T.TgZ(38,"div",16),T.TgZ(39,"div",30),T.TgZ(40,"div",31),T.TgZ(41,"span",32),T._uU(42),T.qZA(),T.qZA(),T._UZ(43,"input",33),T.qZA(),T.qZA(),T.YNc(44,U,2,0,"div",34),T.YNc(45,M,2,0,"div",34),T.YNc(46,w,2,0,"div",34),T.qZA(),T.TgZ(47,"div",35),T.TgZ(48,"button",36),T.NdJ("click",function(){return T.CHM(t),T.oxw(2).btnShopClick()}),T._uU(49,"Lihat Toko"),T.qZA(),T.qZA(),T.TgZ(50,"div",15),T.TgZ(51,"div",16),T.TgZ(52,"h5"),T._uU(53,"Nomor Handphone"),T.qZA(),T.qZA(),T.TgZ(54,"div",37),T.TgZ(55,"input",38),T.NdJ("keypress",function(i){return T.CHM(t),T.oxw(2).validationService.numberOnly(i)}),T.qZA(),T.qZA(),T.YNc(56,P,2,0,"div",34),T.YNc(57,O,2,0,"div",34),T.qZA(),T.TgZ(58,"div",15),T.TgZ(59,"div",16),T.TgZ(60,"h5"),T._uU(61,"Email"),T.qZA(),T.qZA(),T.TgZ(62,"div",16),T._UZ(63,"input",39),T.qZA(),T.YNc(64,J,2,0,"div",34),T.YNc(65,E,2,0,"div",34),T.qZA(),T.TgZ(66,"div",15),T.TgZ(67,"div",16),T.TgZ(68,"h5"),T._uU(69,"Alamat (Kode POS-Kota-Provinsi)"),T.qZA(),T.qZA(),T.TgZ(70,"div",16),T._UZ(71,"ng-select",40),T.YNc(72,Y,2,0,"p",25),T.qZA(),T.qZA(),T.TgZ(73,"div",15),T.TgZ(74,"div",16),T.TgZ(75,"h5"),T._uU(76,"Alamat Toko "),T._UZ(77,"i",41),T.qZA(),T.qZA(),T.TgZ(78,"div",16),T._UZ(79,"textarea",42),T.YNc(80,B,2,0,"p",25),T.YNc(81,Q,2,0,"p",25),T.qZA(),T.qZA(),T.TgZ(82,"div",35),T.TgZ(83,"div",43),T.TgZ(84,"button",44),T._UZ(85,"i",45),T._uU(86," BATAL "),T.qZA(),T.qZA(),T.TgZ(87,"div",46),T.TgZ(88,"button",47),T._uU(89," SIMPAN "),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.qZA()}if(2&t){const t=T.MAs(33),i=T.oxw(2);T.xp6(3),T.Q6J("formGroup",i.configurationStoreLocationForm),T.xp6(11),T.Q6J("ngIf",!i.previewStoreImage),T.xp6(1),T.Q6J("ngIf",i.previewStoreImage),T.xp6(8),T.Q6J("ngIf",i.configurationStoreLocationForm.get("image").hasError("required")&&(i.configurationStoreLocationForm.get("image").dirty||i.configurationStoreLocationForm.get("image").touched)),T.xp6(7),T.Q6J("ngModelOptions",T.DdM(24,G))("ngModel",i.productLinkBusiness),T.xp6(7),T.Q6J("ngbTooltip",t),T.xp6(5),T.Oqu(i.storeLinkHost),T.xp6(2),T.Q6J("ngIf",i.configurationStoreLocationForm.get("link").hasError("required")&&(i.configurationStoreLocationForm.get("link").dirty||i.configurationStoreLocationForm.get("link").touched)),T.xp6(1),T.Q6J("ngIf",i.configurationStoreLocationForm.get("link").hasError("pattern")),T.xp6(1),T.Q6J("ngIf",i.configurationStoreLocationForm.get("link").hasError("maxlength")),T.xp6(2),T.Q6J("disabled",i.disableBtnShop()),T.xp6(8),T.Q6J("ngIf",i.configurationStoreLocationForm.get("phoneNumber").hasError("required")&&(i.configurationStoreLocationForm.get("phoneNumber").dirty||i.configurationStoreLocationForm.get("phoneNumber").touched)),T.xp6(1),T.Q6J("ngIf",i.configurationStoreLocationForm.get("phoneNumber").hasError("pattern")),T.xp6(7),T.Q6J("ngIf",i.configurationStoreLocationForm.get("email").hasError("required")&&(i.configurationStoreLocationForm.get("email").dirty||i.configurationStoreLocationForm.get("email").touched)),T.xp6(1),T.Q6J("ngIf",i.configurationStoreLocationForm.get("email").hasError("invalidEmail")),T.xp6(6),T.Q6J("clearable",!1)("items",i.location.postalCodeCityProvince)("multiple",!1)("closeOnSelect",!0),T.xp6(1),T.Q6J("ngIf",i.configurationStoreLocationForm.get("postalCodeCityProvince").hasError("required")&&(i.configurationStoreLocationForm.get("postalCodeCityProvince").dirty||i.configurationStoreLocationForm.get("postalCodeCityProvince").touched)),T.xp6(8),T.Q6J("ngIf",i.configurationStoreLocationForm.get("address").hasError("required")&&(i.configurationStoreLocationForm.get("address").dirty||i.configurationStoreLocationForm.get("address").touched)),T.xp6(1),T.Q6J("ngIf",i.configurationStoreLocationForm.get("address").hasError("pattern")),T.xp6(7),T.Q6J("disabled",!i.configurationStoreLocationForm.valid)}}function D(t,i){if(1&t&&(T.TgZ(0,"div",4),T.TgZ(1,"div",5),T.TgZ(2,"h3"),T._uU(3,"Pengaturan Toko"),T.qZA(),T.TgZ(4,"p"),T._uU(5,"Atur jasa pengiriman dan profile untuk toko"),T.qZA(),T.qZA(),T.qZA(),T.TgZ(6,"ul",6,7),T.TgZ(8,"li",8),T.TgZ(9,"a",9),T._uU(10,"Informasi Toko"),T.qZA(),T.YNc(11,R,90,25,"ng-template",10),T.qZA(),T.qZA(),T._UZ(12,"div",11)),2&t){const t=T.MAs(7);T.xp6(12),T.Q6J("ngbNavOutlet",t)}}const H=[{path:"",component:(()=>{class t{constructor(t,i,o,e,n,r,g,p){this.formBuilder=t,this.requestService=i,this.apiModelTranslatorService=o,this.validationService=e,this.alertService=n,this.errorService=r,this.modalService=g,this.router=p,this.loading=!0,this.pageName="",this.responseApi=new Z.d,this.user=new a.n,this.infoConfigStore=new c.r,this.apiInfoStore=l.N.apiUrl+u.b.MERCHANT,this.apiGetLocation=l.N.apiUrl+u.b.LOCATION,this.location=new s.Ye,this.tempGetLocation=[],this.locationType=d._,this.productLinkBusiness="",this.productLinkRoot=l.N.envUrl,this.storeLinkHost=""}ngOnInit(){this.initLoad()}form(t){this.configurationStoreLocationForm=this.formBuilder.group({image:[null,[r.kI.required]],link:[null==t?void 0:t.link,[r.kI.required,r.kI.pattern,r.kI.maxLength(25)]],phoneNumber:[null==t?void 0:t.phoneNumber,[r.kI.required,r.kI.pattern]],email:[null==t?void 0:t.email,[r.kI.required,g.T.emailValidator]],postalCodeCityProvince:[null==t?void 0:t.postalCodeCityProvince,[r.kI.required]],address:[null==t?void 0:t.address,[r.kI.required,r.kI.pattern]]})}initLoad(){return(0,n.mG)(this,void 0,void 0,function*(){let t=yield this.getConfigurationStoreInfo();this.form(t),this.user=this.requestService.getUserToken(),this.productLinkBusiness=this.user.businessClientName,this.productLinkBusiness=this.productLinkBusiness.charAt(0).toUpperCase()+this.productLinkBusiness.slice(1),this.location.postalCodeCityProvince=yield this.getLocation(this.locationType.PostalCodeCityProvince,null),this.storeLinkHost=this.productLinkRoot+"/"+m.q.ROUTING_RETAIL+"/"+m.q.ROUTING_MERCHANT+"/"})}getLocation(t,i){return(0,n.mG)(this,void 0,void 0,function*(){let o=this.apiGetLocation+"/"+t,e=null;return null!==i&&(e=new Map,e.set("uiId",i)),this.requestService.get(o,e).toPromise().then(t=>(this.tempGetLocation=this.apiModelTranslatorService.snakeToCamelCase(t),this.tempGetLocation),t=>{this.errorService.getErrorApi(t)})})}changeStateLocationType(t){return(0,n.mG)(this,void 0,void 0,function*(){if(t===d._.City){this.configurationStoreLocationForm.patchValue({city:null}),this.configurationStoreLocationForm.patchValue({district:null}),this.configurationStoreLocationForm.patchValue({subDistrict:null}),this.configurationStoreLocationForm.patchValue({postalCode:null});let i=this.configurationStoreLocationForm.get("province").value;this.location.city=yield this.getLocation(t,i.uiId)}else if(t===d._.District){this.configurationStoreLocationForm.patchValue({district:null}),this.configurationStoreLocationForm.patchValue({subDistrict:null}),this.configurationStoreLocationForm.patchValue({postalCode:null});let i=this.configurationStoreLocationForm.get("city").value;this.location.district=yield this.getLocation(t,i.uiId)}else if(t===d._.SubDistrict){this.configurationStoreLocationForm.patchValue({subDistrict:null}),this.configurationStoreLocationForm.patchValue({postalCode:null});let i=this.configurationStoreLocationForm.get("district").value;this.location.subDistrict=yield this.getLocation(t,i.uiId)}else if(t===d._.PostalCode){this.configurationStoreLocationForm.patchValue({postalCode:null});let i=this.configurationStoreLocationForm.get("subDistrict").value;this.location.postalCode=yield this.getLocation(t,i.uiId)}})}submitConfigurationStoreLocation(){if(this.configurationStoreLocationForm.valid){let t=new c.r;t.postalCodeUiId=this.configurationStoreLocationForm.get("postalCodeCityProvince").value.uiId,t.address=this.configurationStoreLocationForm.get("address").value,t.email=this.configurationStoreLocationForm.get("email").value,t.phoneNumber=this.configurationStoreLocationForm.get("phoneNumber").value,t.link=this.configurationStoreLocationForm.get("link").value,h().fire({title:"Simpan Lokasi Toko?",text:"Lokasi toko akan di set sebagai pengantaran barang ?",showCancelButton:!0,cancelButtonText:"BATAL",cancelButtonColor:"#666666",reverseButtons:!0,confirmButtonColor:"#E1251B",confirmButtonText:"SIMPAN",showLoaderOnConfirm:!0,customClass:{title:"swal2-title-modal-medium"},preConfirm:()=>(0,n.mG)(this,void 0,void 0,function*(){yield this.uploadImageProduct(this.imageToUpload),this.requestService.post(this.apiInfoStore,null,this.apiModelTranslatorService.camelToSnakeCase(t)).subscribe(t=>{this.router.navigate([m.q.ROUTING_CONFIGURATION]),this.alertService.setProps("Success! Set Store Location",!1)},t=>{this.errorService.getErrorApi(t)})})})}}uploadImageProduct(t){return(0,n.mG)(this,void 0,void 0,function*(){return this.requestService.uploadSingleFile("image",this.apiInfoStore+u.b.MERCHANT_IMAGE,t).toPromise().then(t=>{},t=>{this.errorService.getErrorApi(t)})})}getConfigurationStoreInfo(){return(0,n.mG)(this,void 0,void 0,function*(){return this.requestService.get(this.apiInfoStore,null).toPromise().then(t=>(this.infoConfigStore=this.apiModelTranslatorService.snakeToCamelCase(t),this.previewStoreImage=this.infoConfigStore.image,this.loading=!1,this.infoConfigStore),t=>{this.responseApi=t.error,this.responseApi.error.code===f.X.MERCHANT_NOT_FOUND?this.router.navigate([m.q.ERROR_CUSTOM,v.R.KYB]):this.errorService.getErrorApi(t)})})}disableBtnShop(){return null==this.infoConfigStore.link||""==this.infoConfigStore.link}btnShopClick(){window.open(this.storeLinkHost+this.infoConfigStore.link,"_blank")}fileProgress(t){this.fileData=t.target.files[0],void 0!==this.fileData&&this.preview()}preview(){var t;if(null===(null===(t=this.fileData)||void 0===t?void 0:t.type).match("image.*"))return this.configurationStoreLocationForm.patchValue({image:null}),void this.alertService.setProps("Failed Upload Type",!0);if(this.fileData.size>1e6)return this.configurationStoreLocationForm.patchValue({image:null}),void this.alertService.setProps("Size more than 1 MB",!0);let i=new FileReader;i.readAsDataURL(this.fileData),i.onload=t=>{let o=new Image;o.src=i.result,o.onload=()=>{o.naturalHeight<300||o.naturalWidth<300?(this.configurationStoreLocationForm.patchValue({image:null}),this.alertService.setProps("Minimum width and height 300",!0)):(this.previewStoreImage=i.result,this.imageToUpload=this.fileData)}}}}return t.\u0275fac=function(i){return new(i||t)(T.Y36(r.qu),T.Y36(S.s),T.Y36(A.g),T.Y36(b.R),T.Y36(q.c),T.Y36(k.T),T.Y36(L.FF),T.Y36(C.F0))},t.\u0275cmp=T.Xpm({type:t,selectors:[["app-configuration-store-location"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loaded",""],[1,"center"],["role","status",1,"spinner-border","text-primary","spinner-sm","mr-5"],[1,"row"],[1,"form-group","col-md-12","page-header"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink","",1,""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"card","card-body"],[1,"col-12","col-md-9"],["id","configurationStoreLocationForm",1,"pt-10",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col"],[1,"col-12"],[1,"responsive-layout","justify-content-start","w-100"],[1,"image-upload","d-flex","justify-content-center",2,"border-style","dashed","width","150px","height","150px"],[2,"margin-top","auto","margin-bottom","auto"],[4,"ngIf"],[1,"form-group","mt-auto","p-2"],["for","file-input1",1,"btn","btn-secondary","ml-auto"],["id","file-input1","type","file","name","image","accept","image/png, image/jpg, image/jpeg","formControlName","image","hidden","",1,"btn",3,"change"],["class","text-danger",4,"ngIf"],["ngbTooltip","Nama toko tidak dapat diubah, silahkan kunjungi Menu Business Activation untuk perubahan Nama Toko",1,"fas","fa-info-circle"],["id","name","placeholder","Store Name","required","","type","text","pattern","^[a-zA-Z0-9.\\\\-\\\\/+,=_:'@%| ]*$","readonly","",1,"form-control","dk-text-input",3,"ngModelOptions","ngModel"],["tipContent",""],["data-html","true",1,"fas","fa-info-circle",3,"ngbTooltip"],[1,"input-group"],[1,"input-group-append"],["id","linkStore",1,"input-group-text","dk-span-group"],["formControlName","link","id","link","placeholder","Link-Toko","required","","type","text","pattern","^[a-zA-Z0-9._-]+$",1,"form-control","dk-text-input"],["class","col text-danger",4,"ngIf"],[1,"d-flex","bd-highlight","mb-3","col"],["id","btnShop","type","button",1,"btn","btn-secondary","btn-sm",3,"disabled","click"],[1,"col","input-group"],["formControlName","phoneNumber","id","phoneNumber","placeholder","6281197216322","required","","type","text","pattern","^[1-9][0-9]*$",1,"form-control","dk-text-input",3,"keypress"],["formControlName","email","id","email","placeholder","Masukkan email","required","","type","text",1,"form-control","dk-text-input"],["formControlName","postalCodeCityProvince","bindLabel","name",3,"clearable","items","multiple","closeOnSelect"],["ngbTooltip","Alamat akan digunakan sebagai asal pengiriman",1,"fas","fa-info-circle"],["formControlName","address","rows","4","id","address","placeholder","Masukkan detail alamat lengkap toko Anda","required","","pattern","^[a-zA-Z0-9.\\\\-\\\\/+,=_:'@%| ]*$",1,"form-control","dk-text-input"],[1,"mr-auto","bd-highlight","align-middle"],["id","backButton","type","button",1,"btn","btn-secondary","ml-auto"],[1,"fa","fa-arrow-left","in-icon"],[1,"p-2","bd-highlight","align-middle"],["id","save","type","submit",1,"btn","btn-primary","ml-auto",3,"disabled"],[1,"fas","fa-store","fa-8x"],[1,"image-container",3,"src"],[1,"text-danger"],[2,"text-align","left"],[1,"col","text-danger"]],template:function(t,i){if(1&t&&(T.YNc(0,x,3,0,"div",0),T.YNc(1,D,13,1,"ng-template",null,1,T.W1O)),2&t){const t=T.MAs(2);T.Q6J("ngIf",i.loading)("ngIfElse",t)}},directives:[e.O5,L.Pz,L.nv,L.Vx,L.uN,L.tO,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,L._L,r.Q7,r.c5,r.On,_.w9],styles:[".center[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:fixed;top:0;bottom:0;left:0;right:0;margin:auto}img.image-container[_ngcontent-%COMP%]{width:110px;height:110px;-o-object-fit:contain;object-fit:contain}.responsive-layout[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.responsive-layout[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:first-child, .responsive-layout[_ngcontent-%COMP%]{margin-right:16px}@media (max-width: 768px){.responsive-layout[_ngcontent-%COMP%]{display:block}.responsive-layout[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .responsive-layout[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}}"]}),t})(),pathMatch:"full"}];let V=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=T.oAB({type:t}),t.\u0275inj=T.cJS({imports:[[e.ez,C.Bz.forChild(H),L.jF,r.u5,L.XC,_.A0,r.UX,L.Oz,L.HK]]}),t})()}}]);